{"ast":null,"code":"import _regeneratorRuntime from \"/Users/rgm93/Library/Mobile Documents/com~apple~CloudDocs/Proyectos/Trabajo/SCAPESHIFT/BC/bc_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/rgm93/Library/Mobile Documents/com~apple~CloudDocs/Proyectos/Trabajo/SCAPESHIFT/BC/bc_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/rgm93/Library/Mobile Documents/com~apple~CloudDocs/Proyectos/Trabajo/SCAPESHIFT/BC/bc_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rgm93/Library/Mobile Documents/com~apple~CloudDocs/Proyectos/Trabajo/SCAPESHIFT/BC/bc_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rgm93/Library/Mobile Documents/com~apple~CloudDocs/Proyectos/Trabajo/SCAPESHIFT/BC/bc_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rgm93/Library/Mobile Documents/com~apple~CloudDocs/Proyectos/Trabajo/SCAPESHIFT/BC/bc_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rgm93/Library/Mobile Documents/com~apple~CloudDocs/Proyectos/Trabajo/SCAPESHIFT/BC/bc_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/rgm93/Library/Mobile Documents/com~apple~CloudDocs/Proyectos/Trabajo/SCAPESHIFT/BC/bc_dashboard/src/views/Transactions/Contracts/AssignmentContract/steps/SCSHID.jsx\";\nimport React, { Component } from \"react\";\nimport * as faceapi from \"face-api.js\";\nimport Webcam from \"react-webcam\";\nimport './SCSHID.css';\n\nvar LiveVideoSCSHID =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LiveVideoSCSHID, _Component);\n\n  function LiveVideoSCSHID(props) {\n    var _this;\n\n    _classCallCheck(this, LiveVideoSCSHID);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LiveVideoSCSHID).call(this, props));\n\n    _this.mediaHandler = function () {\n      console.log(faceapi.nets);\n      var hideo = document.getElementById(\"video\");\n      var displaySize = {\n        width: hideo.width,\n        height: hideo.height\n      };\n      var canvas = faceapi.createCanvas({\n        width: hideo.width,\n        height: hideo.height\n      });\n      document.getElementById(\"videoContainer\").append(canvas);\n      faceapi.matchDimensions(canvas, displaySize); // const box = { x: 50, y: 50, width: 100, height: 100 }\n      // see DrawBoxOptions below\n      // const drawOptions = {\n      // label: 'Hello I am a box!',\n      // lineWidth: 2\n      // }\n      // const canvas = faceapi.createCanvasFromMedia(hideo)\n\n      console.log(canvas);\n      console.log(displaySize);\n      setInterval(\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var detections, resizedDetections;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return faceapi.detectAllFaces(hideo, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks(true).withFaceExpressions().withAgeAndGender().withFaceDescriptors();\n\n              case 2:\n                detections = _context.sent;\n                // console.log(detections)\n                detections.map(function (face, index) {\n                  return console.log(\"Face #\", index, \"Guessed age:\", face.age, \"Guessed gender:\", face.gender);\n                });\n                resizedDetections = faceapi.resizeResults(detections, displaySize);\n                canvas.getContext(\"2d\").clearRect(0, 0, canvas.width, canvas.height); //faceapi.draw.drawDetections(canvas, resizedDetections);\n\n                faceapi.draw.drawFaceExpressions(canvas, resizedDetections);\n                faceapi.draw.drawFaceLandmarks(canvas, resizedDetections);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      })), 100);\n    };\n\n    _this.componentDidMount = function () {\n      Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"), faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"), faceapi.nets.faceLandmark68TinyNet.loadFromUri(\"/models\"), faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"), faceapi.nets.faceExpressionNet.loadFromUri(\"/models\"), faceapi.nets.tinyYolov2.loadFromUri(\"/models\"), faceapi.nets.ageGenderNet.loadFromUri(\"/models\")]).then(_this.setState({\n        loaded: true\n      }));\n    };\n\n    _this.state = {\n      loaded: false\n    };\n    return _this;\n  }\n\n  _createClass(LiveVideoSCSHID, [{\n    key: \"render\",\n    value: function render() {\n      var videoConstraints = {\n        width: 512,\n        height: 512,\n        facingMode: \"user\"\n      };\n      console.log(this.state);\n      return React.createElement(\"div\", {\n        id: \"videoContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, this.state.loaded ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(Webcam, {\n        id: \"video\",\n        width: 512,\n        height: 512,\n        audio: false,\n        videoConstraints: videoConstraints,\n        onUserMedia: this.mediaHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      })) : null);\n    }\n  }]);\n\n  return LiveVideoSCSHID;\n}(Component);\n\nvar SCSHID =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SCSHID, _React$Component);\n\n  function SCSHID(props) {\n    _classCallCheck(this, SCSHID);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SCSHID).call(this, props));\n  }\n\n  _createClass(SCSHID, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"SCSHID\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(LiveVideoSCSHID, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return SCSHID;\n}(React.Component);\n\nexport { SCSHID as default };","map":{"version":3,"sources":["/Users/rgm93/Library/Mobile Documents/com~apple~CloudDocs/Proyectos/Trabajo/SCAPESHIFT/BC/bc_dashboard/src/views/Transactions/Contracts/AssignmentContract/steps/SCSHID.jsx"],"names":["React","Component","faceapi","Webcam","LiveVideoSCSHID","props","mediaHandler","console","log","nets","hideo","document","getElementById","displaySize","width","height","canvas","createCanvas","append","matchDimensions","setInterval","detectAllFaces","TinyFaceDetectorOptions","withFaceLandmarks","withFaceExpressions","withAgeAndGender","withFaceDescriptors","detections","map","face","index","age","gender","resizedDetections","resizeResults","getContext","clearRect","draw","drawFaceExpressions","drawFaceLandmarks","componentDidMount","Promise","all","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceLandmark68TinyNet","faceRecognitionNet","faceExpressionNet","tinyYolov2","ageGenderNet","then","setState","loaded","state","videoConstraints","facingMode","SCSHID"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport * as faceapi from \"face-api.js\";\nimport Webcam from \"react-webcam\";\n\nimport './SCSHID.css';\n\nclass LiveVideoSCSHID extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false\n    };\n  }\n\n  mediaHandler = () => {\n    console.log(faceapi.nets);\n    const hideo = document.getElementById(\"video\");\n    const displaySize = {\n      width: hideo.width,\n      height: hideo.height\n    };\n    const canvas = faceapi.createCanvas({\n      width: hideo.width,\n      height: hideo.height\n    });\n    document.getElementById(\"videoContainer\").append(canvas);\n    faceapi.matchDimensions(canvas, displaySize);\n\n    // const box = { x: 50, y: 50, width: 100, height: 100 }\n    // see DrawBoxOptions below\n    // const drawOptions = {\n    // label: 'Hello I am a box!',\n    // lineWidth: 2\n    // }\n\n    // const canvas = faceapi.createCanvasFromMedia(hideo)\n    console.log(canvas);\n    console.log(displaySize);\n    setInterval(async () => {\n      const detections = await faceapi\n        .detectAllFaces(hideo, new faceapi.TinyFaceDetectorOptions())\n        .withFaceLandmarks(true)\n        .withFaceExpressions()\n        .withAgeAndGender()\n        .withFaceDescriptors();\n      // console.log(detections)\n\n      detections.map((face, index) =>\n        console.log(\"Face #\", index, \"Guessed age:\", face.age, \"Guessed gender:\", face.gender)\n      );\n      const resizedDetections = faceapi.resizeResults(detections, displaySize);\n      canvas.getContext(\"2d\").clearRect(0, 0, canvas.width, canvas.height);\n      //faceapi.draw.drawDetections(canvas, resizedDetections);\n      faceapi.draw.drawFaceExpressions(canvas, resizedDetections);\n      faceapi.draw.drawFaceLandmarks(canvas, resizedDetections);\n    }, 100);\n  };\n\n  componentDidMount = () => {\n    Promise.all([\n      faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"),\n      faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\n      faceapi.nets.faceLandmark68TinyNet.loadFromUri(\"/models\"),\n      faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),\n      faceapi.nets.faceExpressionNet.loadFromUri(\"/models\"),\n      faceapi.nets.tinyYolov2.loadFromUri(\"/models\"),\n      faceapi.nets.ageGenderNet.loadFromUri(\"/models\")\n    ]).then(\n      this.setState({\n        loaded: true\n      })\n    );\n  };\n\n  render() {\n    const videoConstraints = {\n      width: 512,\n      height: 512,\n      facingMode: \"user\"\n    };\n\n    console.log(this.state);\n    return (\n      <div id=\"videoContainer\">\n        {this.state.loaded ? (\n          <div>\n            <Webcam\n              id=\"video\"\n              width={512}\n              height={512}\n              audio={false}\n              videoConstraints={videoConstraints}\n              onUserMedia={this.mediaHandler}\n            ></Webcam>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default class SCSHID extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"SCSHID\">\n        <LiveVideoSCSHID />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}